[H1] Create knowledge mining solutionIn exercise, use AI Search index set documents maintained Margies Travel, fictional travel agency. The indexing process involves using AI skills extract key information make searchable, generating knowledge store containing data assets analysis.This exercise takes approximately 40 minutes.## Create Azure resourcesThe solution create Margies Travel requires multiple resources Azure subscription. In exercise, youll create directly Azure portal. You could also create using script, ARM BICEP template; could create Azure AI Foundry project includes Azure AI Search resource.### Important: Your Azure resources created location!## Create Azure AI Search resource1. In web browser, open Azure portal sign using Azure credentials.2. Select Create resource button, search Azure AI Search, create Azure AI Search resource following settings: - Subscription: Your Azure subscription - Resource group: Create select resource group - Service name: A valid name search
search Azure AI Search, create Azure AI Search resource following settings: - Subscription: Your Azure subscription - Resource group: Create select resource group - Service name: A valid name search resource - Location: Any available location - Pricing tier: Free3. Wait deployment complete, go deployed resource.4. Review Overview page blade Azure AI Search resource Azure portal. Here, use visual interface create, test, manage, monitor various components search solution; including data sources, indexes, indexers, skillsets.## Create storage account1. Return home page, create Storage account resource following settings: - Subscription: Your Azure subscription - Resource group: The resource group Azure AI Search Azure AI Services resources - Storage account name: A valid name storage resource - Region: The region Azure AI Search resource - Primary service: Azure Blob Storage Azure Data Lake Storage Gen 2 - Performance: Standard - Redundancy: Locally-redundant storage (LRS)2. Wait
resource - Region: The region Azure AI Search resource - Primary service: Azure Blob Storage Azure Data Lake Storage Gen 2 - Performance: Standard - Redundancy: Locally-redundant storage (LRS)2. Wait deployment complete, go deployed resource.## Upload documents Azure StorageYour knowledge mining solution extract information travel brochure documents Azure Storage blob container.1. In new browser tab, download documents.zip save local folder.2. Extract downloaded documents.zip file view travel brochure files contains. Youll extract index information files.3. In browser tab containing Azure portal page storage account, navigation pane left, select Storage browser.4. In storage browser, select Blob containers.Currently, storage account contain default $logs container.5. In toolbar, select + Container create new container following settings: - Name: documents - Anonymous access level: Private (no anonymous access)### Note:Unless enabled option allow anonymous container access creating
+ Container create new container following settings: - Name: documents - Anonymous access level: Private (no anonymous access)### Note:Unless enabled option allow anonymous container access creating storage account, wont able select setting!6. Select documents container open it, use Upload toolbar button upload .pdf files extracted documents.zip previously root container, shown here:## Create run indexerNow documents place, create indexer extract information them.1. In Azure portal, browse Azure AI Search resource. Then, Overview page, select Import data.2. On Connect data page, Data Source list, select Azure Blob Storage. Then complete data store details following values: - Data Source: Azure Blob Storage - Data source name: margies-documents - Data extract: Content metadata - Parsing mode: Default - Subscription: Your Azure subscription - Connection string: - Select Choose existing connection - Select storage account - Select documents container - Managed identity authentication:
mode: Default - Subscription: Your Azure subscription - Connection string: - Select Choose existing connection - Select storage account - Select documents container - Managed identity authentication: None - Container name: documents - Blob folder: Leave blank - Description: Travel brochures3. Proceed next step (Add cognitive skills), three expandable sections complete.4. In Attach Azure AI Services section, select Free (limited enrichments).### Note:The free Azure AI Services resource Azure AI Search used index maximum 20 documents. In real solution, create Azure AI Services resource subscription enable AI enrichment larger number documents.5. In Add enrichments section: - Change Skillset name margies-skillset. - Select option Enable OCR merge text merged_content field. - Ensure Source data field set merged_content. - Leave Enrichment granularity level Source field, set entire contents document indexed; note change extract information granular levels, like pages sentences. - Select
data field set merged_content. - Leave Enrichment granularity level Source field, set entire contents document indexed; note change extract information granular levels, like pages sentences. - Select following enriched fields: Cognitive Skill ParameterField name Text Cognitive Skills Extract people names people Extract location names locations Extract key phrases keyphrases Image Cognitive Skills Generate tags images imageTags Generate captions images imageCaption6. In Save enrichments knowledge store section: - Select following checkboxes (an error displayed, youll resolve shortly): - Azure file projections: - Image projections: - Azure table projections: - Documents - Key phrases - Azure blob projections: - Document - Under Storage account connection string (beneath error messages): - Select Choose existing connection - Select storage account - Select documents container (this required select storage account browse interface - youll specify different container name extracted
- Select Choose existing connection - Select storage account - Select documents container (this required select storage account browse interface - youll specify different container name extracted knowledge assets!) - Change Container name knowledge-store.7. Proceed next step (Customize target index), youll specify fields index.8. Change Index name margies-index.9. Ensure Key set metadata_storage_path, leave Suggester name blank, ensure Search mode analyzingInfixMatching.10. Make following changes index fields, leaving fields default settings (IMPORTANT: may need scroll right see entire table):Field name Retrievable Filterable SortableFacetableSearchablemetadata_storage_size metadata_storage_last_modified metadata_storage_name locations people keyphrases Double-check selections, paying particular attention ensure correct Retrievable, Filterable, Sortable, Facetable, Searchable options selected correctly field (it difficult change later).11. Proceed next step (Create indexer), youll
particular attention ensure correct Retrievable, Filterable, Sortable, Facetable, Searchable options selected correctly field (it difficult change later).11. Proceed next step (Create indexer), youll create schedule indexer.12. Change Indexer name margies-indexer.13. Leave Schedule set Once.14. Select Submit create data source, skillset, index, indexer. The indexer run automatically runs indexing pipeline, which: - Extracts document metadata fields content data source - Runs skillset cognitive skills generate additional enriched fields - Maps extracted fields index. - Saves extracted data assets knowledge store.15. In navigation pane left, Search management view Indexers page, show newly created margies-indexer. Wait minutes, click â†» Refresh Status indicates Success.## Search indexNow index, search it.1. Return Overview page Azure AI Search resource, toolbar, select Search explorer.2. In Search explorer, Query string box, enter * (a single asterisk), select Search.This query retrieves
search it.1. Return Overview page Azure AI Search resource, toolbar, select Search explorer.2. In Search explorer, Query string box, enter * (a single asterisk), select Search.This query retrieves documents index JSON format. Examine results note fields document, contain document content, metadata, enriched data extracted cognitive skills selected.3. In View menu, select JSON view note JSON request search shown, like this:json{ "search": "*", "count": true}4. The results include @odata.count field top results indicates number documents returned search.5. Modify JSON request include select parameter shown here:json{ "search": "*", "count": true, "select": "metadata_storage_name,locations}This time results include file name locations mentioned document content. The file name metadata_storage_name field, extracted source document. The locations field generated AI skill.6. Now try following query string:json{ "search": "*", "count": true, "select": "metadata_storage_name,keyphrases"}7.
field, extracted source document. The locations field generated AI skill.6. Now try following query string:json{ "search": "*", "count": true, "select": "metadata_storage_name,keyphrases"}7. Now try following query string:json{ "search": "New York", "count": true, "select": "metadata_storage_name,keyphrases", "filter": "metadata_storage_size lt 380000"}This query returns filename key phrases documents mentioning New York smaller 380,000 bytes size.## Create search client applicationNow useful index, use client application. You consuming REST interface, submitting requests receiving responses JSON format HTTP; use software development kit (SDK) preferred programming language. In exercise, well use SDK.Note: You choose use SDK either C# Python. In steps below, perform actions appropriate preferred language.### Get endpoint keys search resource1. In Azure portal, close search explorer page return Overview page Azure AI Search resource.Note Url value, similar This endpoint search
preferred language.### Get endpoint keys search resource1. In Azure portal, close search explorer page return Overview page Azure AI Search resource.Note Url value, similar This endpoint search resource.2. In navigation pane left, expand Settings view Keys page.Note two admin keys, single query key. An admin key used create manage search resources; query key used client applications need perform search queries.You need endpoint query key client application.## Prepare use Azure AI Search SDK1. Use [
